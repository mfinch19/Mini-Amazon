{% extends "base.html" %}

{% block content %}

<div class="main">

  <br><br>
  <!-- bootstrap theme -->
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
  <h2>Your Inventory:</h2>
  <!-- ADD PRODUCTS BUTTON -->
  <div>
    <p><a href="{{ url_for('index.createProduct') }}" class="btn btn-dark" role="button">Add Product</a></p>
  </div>

  <div>
    {%if message != null%}
    <p> {{message}} </p>
    {%endif%}
  </div>

  <h5><i>Showing page {{ page+1 }}</i></h5>
  <!-- No previous page -->
  {% if page == 0 and count != null and count > 10 %}
    <a href="{{ url_for('index.inventory', page=page+1) }}" class="btn btn-dark" role="button"
      style="float: right;">Next</a>
  {% elif page == 0 and count == null %}
    <a href="{{ url_for('index.inventory', page=page+1) }}" class="btn btn-dark" role="button"
      style="float: right;">Next</a>
  {% elif page == 0%}
  {% elif count != null and count>(page+1)*10 %}
    <a href="{{ url_for('index.inventory', page=page+1) }}" class="btn btn-dark" role="button"
      style="float: right;">Next</a><a href="{{ url_for('index.inventory', page=page-1) }}" class="btn btn-dark"
      role="button" style="float: right;">Previous</a>
  {% else %}
    <a href="{{ url_for('index.inventory', page=page-1) }}" class="btn btn-dark"
    role="button" style="float: right;">Previous</a>
  {% endif %}

  <br> <br>

  <table class="table table-light table-striped table-hover container">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Seller ID</th>
        <th scope="col">Seller Name</th>
        <th scope="col">Product</th>
        <th scope="col">Price</th>
        <th scope="col">Stock</th>
        <th scope="col">Edit</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for inventory in sold_products %}
      <tr>
        <th scope="row">{{ inventory.seller_id }}</th>
        <td>{{ inventory.lastname + ", " + inventory.firstname }}</td>
        <td>{{ inventory.prod_name }}</td>
        <td>{{ inventory.price }}</td>
        <td>{{ inventory.stock }}</td>
        <td>
          <div>
            <p><a href="{{ url_for('products.edit_product', id=inventory.product_id)}}" class="btn btn-dark"
                role="button">Edit</a></p>
          </div>
        </td>
        <td>
          <div>
            <p><a href="{{ url_for('products.delete_product', id=inventory.product_id)}}" class="btn btn-dark"
                role="button">Delete</a></p>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <!-- </table>

<br><br>
{% if current_user.is_authenticated %}
<h2>Your recent purchases:</h2>
<table class="table table-light table-striped table-hover container">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Purchase ID</th>
      <th scope="col">Product ID</th>
      <th scope="col">Submit Review</th>
      <th scope="col">Price</th>
      <th scope="col">Status</th>
      <th scope="col">Time Purchased</th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history %}
    <tr>
      <th scope="row">{{ purchase.order_id }}</th>
      <td>{{ purchase.product_id }}</td>
      <td><form action="{{ url_for('index.write_prod_review', product_id=purchase.product_id) }}" method="POST">
        <button class = "btn btn-outline-primary inner_button" type="submit">Submit Review</button>
      </form></td>
      <td>{{ purchase.payment_amount }}</td>
      <td>{{ purchase.status }}</td>
      <td>{{ purchase.time_purchased }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div>
  <p><a href="{{ url_for('users.register') }}" class="btn btn-dark" role="button">Register</a>&nbsp;<a href="{{ url_for('users.login') }}" class="btn btn-dark" role="button">Log in</a></p>
</div>
{% endif %}

{% endblock %} -->